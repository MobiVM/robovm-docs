[id="getting-started-eclipse"]
=== Getting Started with Eclipse

In this section you'll learn how to install Eclipse, install the RoboVM
Eclipse plugin, activate your commercial license, and create and run your
first iOS application.

[id="install-eclipse"]
==== Installing Eclipse
With all the <<prerequisits, prerequisits>> out of the way, proceed to download a recent Eclipse
build from https://www.eclipse.org/downloads/. Eclipse comes in many different
flavors, the _Eclipse IDE for Java Developers_ package is sufficient for
RoboVM development. Simply download the package, decompress it, and copy the
resulting folder int `/Applications/`.

IMPORTANT: Eclipse *MUST* be run using Oracle’s Java SE 7 JDK or later. Apple’s
Java 6 JVM will not work. Running Eclipse itself in Java 7 is not the same as
adding a Java 7 JRE to Eclipe's _Installed JREs_ dialog in _Preferences_. To
check which Java version Eclipse is running in go to _Eclipse -> About
Eclipse_, then click _Installation Details_ and open the _Configuration_ tab.
Find the `java.version` property and make sure it is 1.7 or higher.

IMPORTANT: The default max heap setting for Eclipse may be too low. In order
to increase it *you need to change the -Xmx setting used when launching
Eclipse*. To do this locate your Eclipse installation folder, right-click the
Eclipse file and select _Show Package Contents_. Open the `eclipse.ini` file
located in `Contents/MacOS` in a text editor and change the -Xmx value to 2G
or more. Restart Eclipse.

[id="install-eclipse-plugin"]
==== Installing the Plugin

With Eclipse <<install-eclipse, installed and setup>>, you ca now install the
RoboVM Eclipse plugin by selecting _Install New Software_ from the Eclipse
_Help_ menu, enter the following update site into the _Work with_ field and
click _Next_:

----
http://download.robovm.org/eclipse/
----

[[img-eclipse-install-new-software]]
.Eclipse _Install New Software_ dialog
image::eclipse-install-new-software.png[]

Follow the on-screen instructions until installation is complete and restart Eclipse.

[id="eclipse-activate-license"] 
==== Activating your License 

If you have http://www.robovm.com/pricing/[purchased a subscription] for one
of RoboVM's subscription plans, you have to active the license for use on your
computer. Activating the license will enable the features you purchased, such
as debugging support or Interface Builder integration. Select _License
Manager_ from the Eclipse _RoboVM_ menu and enter your license key.

[[img-eclipse-license-key]]
.License Manager dialog
image::license-manager.png[]

NOTE: A commercial license is not required to create RoboVM applications and
deploy them to the App Store. Commercial licenses add additional features and
services on top of the free core of RoboVM. For more information, visit our
http://www.robovm.com/pricing/[pricing page].

[id="eclipse-creating-a-project"]
==== Creating a Project

You can now create your first RoboVM project! Select __File -> New -> RoboVM
iOS Project__. The project wizard will appear:

[[img-eclipse-project-wizard]]
.New Project Wizard
image::eclipse-project-wizard.png[]

Perform these steps to define your project:

. Fill in your _Project Name_
. Specify the package and name of your _Main Class_, e.g. _com.mycompany.myapp.Main_
. Specify the _App Name_. This is the name used when your app is installed to an iOS device or simulator
. Specify the _App ID_. This must be a unique identifier, usually your package name
. Click _Finish_

==== Running & Debugging 

You can run or debug a RoboVM app on either the simulator or a
<<prerequisits,provisioned device>> connected via USB, directly from within
Eclipse. Right click the project in the package or project view, select _Run
As_ or _Debug As_, then select which platform you want to run/debug the app
on.

[[img-eclipse-run-debug]]
.Running & Debugging from within Eclipse
image::eclipse-run-debug.png[]

NOTE: The first time you run your application on the simulator or the device,
RoboVM has to compile not only the classes of your app, but also any runtime
classes required by your code. This can take some time. The next time you
compile your app, RoboVM will only recompile the classes that have changed
since the last compilation. You can view RoboVM's progress in the RoboVM
console view.

[[img-eclipse-debug-sim]]
.Debugging on the simulator in Eclipse
image::eclipse-debug-sim.png[]

When starting you app in debug mode, you have the full debugging tools of
Eclipse at your disposal: you can set breakpoints, step into/out/over source
lines, inspect and set variables and even use http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.docuser%2Freference%2Fviews%2Fdisplay%2Fref-display_view.htm[Eclipse' display view]

==== Unit Testing

RoboVM supports running and debugging JUnit tests for console and simulator
apps. Let's add a new unit test to our project.

Create a new source folder which will contain all your unit tests by right clicking the project and selecting __File -> New -> Source Folder__. In the dialog, enter `src/test/java`, then click _Finish_. Copy the following source code to your clipboard, then select the `src/test/java` folder in Eclipse and paste the clipboard contents.

[source,java]
-----
import static org.junit.Assert.*;
import org.junit.Test;

public class MyIOSUnitTest {
    @Test
    public void test() {
        System.out.println(System.getProperty("os.name"));
        System.out.println(System.getProperty("os.arch"));
        fail("Not yet implemented");
    }
}
-----

We have not yet added JUnit as a dependency to our project, so you will see compilation errors. Move your cursor somewhere on the line that reads `@Test` of the `MyIOSUnitTest.java` file, then press `CMD+1` and select _Add JUnit 4 libray to the build path_.

You can now run this unit test by right clicking the `MyIOSUnitTest.java` file in Eclipse, then select _Run As_ or _Debug As_, followed by _iOS Simulator JUnit Test_.

[[img-eclipse-unit-test]]
.Unit testing in Eclipse
image::eclipse-unit-test.png[]

==== Deployment

Once your are happy with your app and have tested it on multiple devices, it's time to publish it to the App Store. For this you need to create an http://en.wikipedia.org/wiki/.ipa_%28file_extension%29[iOSApplication Archive](IPA). To do so from within Ecipse, right click your project, then select _RoboVM Tools -> Package for Ad-hoc/App Store distribution..._.

[[img-eclipse-deploy]]
.IPA export for ad-hoc and App Store distribution
image::eclipse-deploy.png[]

Specify the output directory, your signing identiy and provisioning profile and click _Finish_. You will find a file with the extension `.ipa` in the output directory, which is ready to be uploaded to iTunes Connect via the Application Loader.

NOTE: Please refer to https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SubmittingTheApp.html[Apple's documentation] on how to submit your application.
